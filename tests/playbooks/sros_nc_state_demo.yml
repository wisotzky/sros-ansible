# Copyright 2025 Nokia
# Licensed under the BSD 3-Clause License.
# SPDX-License-Identifier: BSD-3-Clause

---
- hosts: all
  gather_facts: No

  tasks:
  - name: get state SR OS
    vars:
      ansible_connection: netconf     
    ansible.netcommon.netconf_get:
      filter: <state xmlns="urn:nokia.com:sros:ns:yang:sr:state"><system/></state>
      display: json
    register: result
    when: ansible_network_os == "nokia.sros.md"

  - name: get state SRLinux
    vars:
      ansible_connection: netconf     
    ansible.netcommon.netconf_get:
      filter: <system xmlns="urn:nokia.com:srlinux:ns:yang:srlinux-system"><version/></system>
      display: json
    register: result
    when: ansible_network_os == "nokia.slinux.srlinux"

  - name: save result
    set_fact:
      my_var: "{{ result }}"

  - name: display results
    debug:
#      var: my_var.output.data.state.system.version
      var: my_var
...