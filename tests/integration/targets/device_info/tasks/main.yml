---
- name: Collect device information
  nokia.sros.device_info:
  register: device_info

- name: Validate collected fields
  ansible.builtin.assert:
    that:
      - device_info is defined
      - device_info.changed is sameas false
      - device_info.output.network_os is defined
      - device_info.output.network_os | regex_search('^nokia\\.sros')
      - device_info.output.sros_config_mode is defined
    fail_msg: "Device info output is incomplete: {{ device_info }}"
